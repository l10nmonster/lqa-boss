# LQA Boss PWA Viewer

Welcome to the LQA Boss PWA Viewer! This application allows you to open, view, and edit `.lqaboss` flow files generated by the LQA Boss Chrome Extension.

## Features

*   **Load `.lqaboss` Files:** Easily open flow files you've previously captured and saved.
*   **Multi-Page Navigation:** Navigate between different captured pages within a flow.
*   **Visual Screenshot Display:** View the screenshot associated with each page.
*   **Segment Highlighting:** Text segments identified during capture are highlighted on the screenshot.
*   **WYSIWYG (Visual) Editing:** The screenshot displays at a size appropriate for your screen, and highlights are scaled accordingly.
*   **Text Segment Editing:** Modify the text content of captured segments in a dedicated panel.
*   **Change Tracking:** Text fields are highlighted green (unmodified) or red (modified from original).
*   **Undo Segment Changes:** Revert individual text segments back to their original captured content.
*   **Keyboard Navigation:** Use Tab and Shift+Tab to navigate between editable text segments. Tabbing off the last segment of a page (or Shift+Tabbing off the first) will navigate to the next/previous page if available.
*   **Export Edited Metadata:** Save your text modifications as a new JSON file, containing only the segments that were changed, along with their original and current text.

## How to Use

1.  **Accessing the Viewer:**
    *   **If you have the LQA Boss Chrome Extension installed:** Open the extension popup and click the "Open LQA Boss File" button. This will open the PWA Viewer in a new tab.
    *   **Direct URL (if provided):** You can navigate directly to the PWA Viewer's web address in your browser.

2.  **Installing as a PWA (Recommended for Desktop-like Experience):**
    *   When you open the Viewer in a compatible browser (like Chrome, Edge, or Safari on supported platforms), you may see an "Install" icon in the address bar or an option in the browser menu (e.g., "Install LQA Boss File Viewer...").
    *   Installing the PWA adds it to your desktop or app launcher, allowing you to run it like a native application.
    *   On some operating systems, after installing, you might be able to associate `.lqaboss` files to open directly with the PWA (this OS-level association varies).

3.  **Loading a `.lqaboss` File:**
    *   Once the Viewer is open, click the "**üìÇ Load .lqaboss File**" button.
    *   Your system's file chooser dialog will appear.
    *   Navigate to and select the `.lqaboss` file you wish to open.

4.  **Navigating Pages:**
    *   Use the "**< Prev Page**" and "**Next Page >**" buttons below the screenshot to move between the different pages captured in the flow.
    *   The "Page X of Y" indicator will show your current position.

5.  **Viewing Screenshots and Highlights:**
    *   The screenshot for the current page will be displayed.
    *   Dotted highlight boxes will appear over the screenshot, outlining the text segments that were captured.
    *   The currently active text segment (if you've clicked into a textarea or tabbed to it) will have a more prominent, solid highlight.

6.  **Editing Text Segments:**
    *   The panel to the right of the screenshot lists all editable text segments for the current page.
    *   Click into any `textarea` to edit its content.
    *   **Color Indicators:**
        *   A **green** border on the left of the text area indicates the text is unchanged from its original captured state.
        *   A **red** border indicates the text has been modified.
    *   **Undo (‚Ü©Ô∏è):** Click the undo icon (‚Ü©Ô∏è) next to a textarea to revert that specific segment's text back to its original value.

7.  **Keyboard Navigation (Tabbing):**
    *   Press `Tab` to move to the next editable text segment on the current page. If you are on the last segment of a page (and not the last page of the flow), pressing `Tab` will automatically navigate to the first segment of the next page.
    *   Press `Shift+Tab` to move to the previous editable text segment. If you are on the first segment of a page (and not the first page of the flow), pressing `Shift+Tab` will automatically navigate to the last segment of the previous page.
    *   Focus will remain on the first/last segment if you attempt to tab beyond the boundaries of the entire flow.

8.  **Saving Changes:**
    *   After making your desired text modifications, click the "**Save Changes**" button.
    *   A new JSON file (e.g., `yourflowname_edited_segments.json`) will be prepared for download. This file contains **only the segments that were actually changed**, including their original text, the new (current) text, and any other associated metadata (excluding coordinates).
    *   Your browser's download dialog will appear, allowing you to save this JSON file.
    *   **Note:** This does *not* modify the original `.lqaboss` file. It exports a separate file with your edits.

## Troubleshooting

*   **File Not Loading:** Ensure you are selecting a valid `.lqaboss` file. If the file is corrupted or not in the expected format, it may fail to load.
*   **Highlights Misaligned:** If highlights appear misaligned, ensure your browser zoom is at 100%. The viewer attempts to scale highlights correctly for high-DPI (Retina) displays, but extreme zoom levels might cause visual discrepancies.
*   **PWA Install Issues:** PWA installability depends on your browser and operating system supporting the necessary features (HTTPS, Service Worker, Web App Manifest).

---

Enjoy using the LQA Boss PWA Viewer!
